<div class="modal-backdrop">
  <div class="modal" [ngClass]="{'modal-dark-mode': darkMode}">
    <div class="title-close-icon-container">
        <h2 class="modal-title" [ngClass]="{'text-dark-mode': darkMode}">Edit settings</h2>
        <i class='bx bx-x' (click)="onCancel()"></i> 
    </div>
    <div class="form-container">
        <form [formGroup]="form" (ngSubmit)="onUpdateSettings()" class="modal-form">
        <div class="edit-input-label-container">
            <label [ngClass]="{'label-dark-mode': darkMode}">Language</label>
            <select formControlName="language">
                <option *ngFor="let lang of languages" [value]="lang.value">
                {{ lang.label }}
                </option>
            </select>
            <p class="error-msg" *ngIf="formSubmitted && form.get('language')?.hasError('required')">
                Language is required
            </p>
        </div>

        <div class="edit-input-label-container">
            <label [ngClass]="{'label-dark-mode': darkMode}">Timezone</label>
            <select formControlName="timezone">
                <option *ngFor="let tz of timezones" [value]="tz.value">
                {{ tz.label }}
                </option>
            </select>
            <p class="error-msg" *ngIf="formSubmitted && form.get('timezone')?.hasError('required')">
                Timezone is required
            </p>
        </div>

        <div class="edit-input-label-container">
            <label [ngClass]="{'label-dark-mode': darkMode}">Location</label>
            <select formControlName="location">
                <option *ngFor="let loc of locations" [value]="loc.value">
                {{ loc.label }}
                </option>
            </select>
            <p class="error-msg" *ngIf="formSubmitted && form.get('location')?.hasError('required')">
                Location is required
            </p>
        </div>

        <div class="edit-input-label-container dark-mode-container toggle-container">
            <label [ngClass]="{'label-dark-mode': darkMode}">Dark mode</label>
            <label class="switch">
                <input type="checkbox" id="dark_mode" formControlName="dark_mode">
                <span class="slider round"></span>
            </label>
        </div>

        <div class="actions">
            <button type="button" *ngIf="!isLoading" class="form-btn cancel-btn" [ngClass]="{'cancel-btn-dark-mode': darkMode}" (click)="onCancel()">Cancelar</button>
            <button type="submit" *ngIf="!isLoading" class="form-btn">Guardar</button>
        </div>
            <app-loading-spinner
                [isSpinnerActive]="isLoading"
            ></app-loading-spinner>

        </form>
    </div>
  </div>
</div>
